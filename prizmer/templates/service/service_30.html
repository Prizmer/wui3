{% load static %}
<div class="tab-container tab-container-wide">
    <h3 class="form-card-title">Профили мощности</h3>

    <!-- Секция загрузки -->
    <div class="form-section">
        <h4 class="form-section-title">Загрузка профилей в БД</h4>
        <div class="action-row">
            <div class="action-label">
                <strong>Директория c&nbsp;html-файлами:</strong>
            </div>
            <div class="action-controls flex-grow">
                <input type="text" id="direct30" name="direct30" class="form-control-text" placeholder="Введите полный путь к папке...">
            </div>
            <div class="action-controls">
                <button onclick="load_service('service_load30')" class="btn-action" id="load30">Загрузить</button>
            </div>
        </div>
        <div class="status-message-static">{{status}}</div>
    </div>

    <!-- Секция удаления -->
    <div class="form-section">
        <h4 class="form-section-title">Удаление профилей из БД</h4>
        <div class="action-row">
            <div class="action-label">
                <strong>Заводской №:</strong>
            </div>
            <div class="action-controls">
                <input type="text" id="num_del30" name="num_del30" class="form-control-text" placeholder="Введите заводской номер..." style="width: 220px;">
            </div>
            <div class="action-label">
                <strong>Дата для удаления:</strong>
            </div>
            <div class="action-controls">
                 <input type="text" placeholder="Выберите дату" class="form-control-text" id="datepickerDel" name="datepickerDel" style="width: 180px;">
            </div>
            <div class="action-controls flex-grow"></div> <!-- Spacer -->
            <div class="action-controls">
                <button onclick="load_service('del_various30')" class="btn-action btn-danger" id="del30">Удалить</button>
            </div>
        </div>
        <div style="padding: 0 0.5rem 0.5rem;">
             <small class="field-warning">Если поле "Заводской №" останется пустым, будут удалены все получасовые показания на выбранную дату по всем приборам.</small>
        </div>
        <div class="status-message-static">{{del30_status}}</div>
    </div>
</div>

<script>
  // Повторно инициализируем datepicker после загрузки через AJAX
  if ($('#datepickerDel').length && !$('#datepickerDel').hasClass('hasDatepicker')) {
    $('#datepickerDel').datepicker({
      dateFormat: 'dd.mm.yy',
      defaultDate: +0
    });
  }
</script>